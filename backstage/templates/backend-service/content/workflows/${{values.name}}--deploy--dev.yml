name: "${{ values.name | capitalize }} :: Deploy :: Dev"

on: workflow_dispatch

jobs:
  deploy-dev-preview:
    uses: ./.github/workflows/deploy-service.yml
    with:
      github-environment: DevPreview
      stage: $(echo ${{ github.actor }} | awk '{print tolower($0)}')
      service-name: "@shieldpay/${{ values.name }}"
      service-path: backend/services/${{ values.name }}
      lint-code: false
      test-code: false
      github-author: ${{ github.actor }}
    secrets:
      aws-role-arn: {% raw %} ${{ secrets.DEPLOYMENT_ROLE_ARN }} {% endraw %}
